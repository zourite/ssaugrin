<!doctype html>
<html lang="fr">
  <head>
  <meta charset="utf-8">
<title>
  
  Intégrer #Highcharts à du #PHP / #CSV - ssaugrin</title>

<meta name="description" content="Comme on me l&#39;a gentille-ment demandé, j&#39;ai écrit un petit tutoriel sur le moyen d&#39;intégrer Highcharts à du PHP sans passer par un framework. Donc je vais vous montrer comment générer un graphique à l&#39;aide d&#39;un csv.">
<meta name="viewport" content="width=device-width, initial-scale=1">



<link rel="canonical" href="https://saugrin-sonia.fr/integrer-highcharts-a-du-php-csv/" />




  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png?v=1">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png?v=1">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png?v=1">
  <link rel="manifest" href="/favicon/site.webmanifest?v=1">
  
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg?v=1" color="#ffffff">
    <link rel="shortcut icon" href="/favicon/favicon.ico?v=1">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml?v=1">
  
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">


  
  <meta itemprop="name" content="Intégrer #Highcharts à du #PHP / #CSV">
<meta itemprop="description" content="Comme on me l&#39;a gentille-ment demandé, j&#39;ai écrit un petit tutoriel sur le moyen d&#39;intégrer Highcharts à du PHP sans passer par un framework. Donc je vais vous montrer comment générer un graphique à l&#39;aide d&#39;un csv.">


<meta itemprop="datePublished" content="2012-12-02T13:11:52&#43;00:00" />
<meta itemprop="dateModified" content="2012-12-02T13:11:52&#43;00:00" />
<meta itemprop="wordCount" content="482">



<meta itemprop="keywords" content="csv,highcharts,Javascript,Librairie,PHP," />

  <meta property="og:title" content="Intégrer #Highcharts à du #PHP / #CSV" />
<meta property="og:description" content="Comme on me l&#39;a gentille-ment demandé, j&#39;ai écrit un petit tutoriel sur le moyen d&#39;intégrer Highcharts à du PHP sans passer par un framework. Donc je vais vous montrer comment générer un graphique à l&#39;aide d&#39;un csv." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://saugrin-sonia.fr/integrer-highcharts-a-du-php-csv/" />
<meta property="article:published_time" content="2012-12-02T13:11:52+00:00" />
<meta property="article:modified_time" content="2012-12-02T13:11:52+00:00" /><meta property="og:site_name" content="ssaugrin" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Intégrer #Highcharts à du #PHP / #CSV"/>
<meta name="twitter:description" content="Comme on me l&#39;a gentille-ment demandé, j&#39;ai écrit un petit tutoriel sur le moyen d&#39;intégrer Highcharts à du PHP sans passer par un framework. Donc je vais vous montrer comment générer un graphique à l&#39;aide d&#39;un csv."/>
<meta name="twitter:site" content="@zourite"/>

  

  <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
  
    
      
      <link rel="stylesheet" href="/css/foundation.min.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.1.0/css/flag-icon.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css" integrity="sha384-i1LQnF23gykqWXg6jxC2ZbCbUMxyw5gLZY6UiUS98LYV5unm8GWmfkIS6jqJfb4E" crossorigin="anonymous">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" />
      
      
      <link rel="stylesheet" href="/css/main.min.7f537865c70d4ca8b8070b46fe92208109556846b217b6c134ecb4dbc79aa88f.css" integrity="sha256-f1N4ZccNTKi4BwtG/pIggQlVaEayF7bBNOy028eaqI8=">
      
      <link rel="stylesheet" href="/css/add-on.css">
      <link rel="stylesheet" href="/css/style.css">
      <link rel="stylesheet" href="/css/404.css">
    
  
  
  
  
  


<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '199085993902446');
  fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=199085993902446&ev=PageView&noscript=1"
/></noscript>

<script id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/2e31b10cc6e0151227187ee70/9a57f30e2d3981a9eb777ab4f.js");</script>

</head>

  <body id="is-single">
    
<header id="site-header">
  <nav id="site-nav">
    <div class="nav-title">
      <a href="/">
        
          ssaugrin aka Zourite
        
      </a>
    </div>
    <menu id="site-nav-menu" class="flyout-menu">
      
        <a href="/" class="link"><i class="fas fa-home">&nbsp;</i>Accueil</a>
      
        <a href="/a-propos/" class="link"><i class="far fa-id-card">&nbsp;</i>A Propos</a>
      
        <a href="/posts/" class="link"><i class="far fa-newspaper">&nbsp;</i>Blog</a>
      
        <a href="/categories/" class="link"><i class="fas fa-sitemap">&nbsp;</i>Catégories</a>
      
        <a href="/des-livres-pour/" class="link"><i class="fas fa-book">&nbsp;</i>Des livres pour...</a>
      
      
      

    </menu>
    

    
    <a id="cta" href="/rester-soi-meme#apprenons-à-nous-connaitre-échangeons">Faisons connaissance</a>
    
    <a href="#site-nav" class="nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
  </nav>
  
  
</header>

    <div id="wrapper_posts">
      
      <main id="site-main">
        <article class="post">
  <header>
  <div class="title">
    
        <h1>Intégrer #Highcharts à du #PHP / #CSV</h1>
        
        
        
    
</div>
  <div class="meta">
    <time class="published" datetime="2012-12-02 13:11:52 &#43;0000 &#43;0000">
      
      2 décembre 2012
      
    </time>
    <span class="author">Zourite</span>
    
        <p>3 minutes</p>
    
  </div>
</header>

  <section id="socnet-share">
    





  </section>
  
  <div class="content">
    

<p><a href="2012/11/csv.png"><img src="2012/11/csv.png" alt="csv" title="csv" width="128" height="128" class="alignright size-full wp-image-2423" /></a></p>

<p>Comme on me l&rsquo;a gentiment demandé, j&rsquo;ai écrit un petit tutoriel sur le moyen d&rsquo;intégrer <strong>Highcharts</strong> à du PHP sans passer par un framework. Donc je vais vous montrer comment générer un graphique à l&rsquo;aide d&rsquo;un csv. Dans un premier temps, vous devez télécharger la librairie <a href="https://github.com/ghunti/HighchartsPHP/" target="_blank">PHP &#8211; Highcharts de Ghunti.</a></p>

<h3 id="transformer-un-csv-en-array">Transformer un CSV en Array()</h3>

<p>Pour transformer un CSV en <code>array()</code> on va utiliser la fonction <code>fgetcsv()</code></p>

<pre>function get_array() {

        $file = fopen('highcharts_demo.csv', 'r');
            
            while (($line = fgetcsv($file,'',';')) !== FALSE) {
    
                $array_data[] = $line;
            
            }
        
    fclose($file);

    unset($array_data[0]);

    return $array_data;


    }
</pre>

<p>Ce qui vous donnera un <code>array()</code> de cette forme</p>

<pre>Array
(
    [0] => Array
        (
            [0] => Livre
            [1] => Nombre de fois lue
            [2] => Mois de lecture
            [3] => Lecteur
        )

    [1] => Array
        (
            [0] => WordPress
            [1] => 2
            [2] => janvier
            [3] => Mickaël
        )

    [2] => Array
        (
            [0] => PHP
            [1] => 3
            [2] => janvier
            [3] => Raphaël
        )

    [3] => Array
        (
            [0] => SQL
            [1] => 1
            [2] => fevrier
            [3] => Virginie
        )

    [4] => Array
        (
            [0] => Jquery
            [1] => 5
            [2] => mars
            [3] => Mickaël
        )
)</pre>

<p><a href="2012/12/Sélection_012.jpg"><img src="2012/12/Sélection_012-300x200.jpg" alt="Graphique Highcharts PHP" title="Graphique Highcharts PHP" width="300" height="200" class="alignright size-medium wp-image-2436" /></a></p>

<h3 id="transformation-de-l-rsquo-array">Transformation de l&rsquo;array</h3>

<p>Nous allons voir comment obtenir un graphique comme celui de droite. Tout d&rsquo;abord il faudra impérativement modifier le tableau, pour qu&rsquo;il nous renvoie ce que nous voulons, ce sera un tableau multidimensionnel, contenant la valeur et le libellé. On va donc récupérer les livres qui sont les plus lus. Pour qu&rsquo;une portion du camembert soit détaché au moment de la visualisation, il faut insérer deux valeurs au tableau <code>sliced =&gt; true</code> et <code>selected =&gt; true</code>.</p>

<pre>function get_livres() {

        $array = get_array();


        foreach ($array as $value) :
                
                $totaux[$value[0]] += $value[1];

        endforeach;

        foreach ($totaux as $key => $value) :

            if($value > 30) :

                $livres[] = array(

                                'name' => $key , 
                                'sliced' => true,
                                'selected' => true, 
                                'y' => intval($value)

                                ); 
            else :

                $livres[] = array(utf8_decode($key),intval($value));
            
            endif;  

        endforeach;

        
        return $livres;

    }</pre>

<h3 id="générer-le-graphique">Générer le graphique</h3>

<p>Maintenant, il manque juste à incorporer la fonction <code>get_livres()</code> au code pour que le graphique prenne forme.</p>

<pre>function pie_chart() {

$chart1 = new Highchart();

$chart1->chart->renderTo = "contain";
$chart1->chart->plotBackgroundColor = null;
$chart1->chart->plotBorderWidth = null;
$chart1->chart->plotShadow = false;
$chart1->title->text = "Pourcentage de lecture par livre";

$chart1->tooltip->formatter = new HighchartJsExpr("function() {
    return '<b>'+ this.point.name +'</b>: '+ Math.round(this.percentage*100)/100 +' %';}");

$chart1->plotOptions->pie->allowPointSelect = 1;
$chart1->plotOptions->pie->cursor = "pointer";
$chart1->plotOptions->pie->dataLabels->enabled = 1;
$chart1->plotOptions->pie->dataLabels->color = "#000000";
$chart1->plotOptions->pie->dataLabels->connectorColor = "#000000";

$chart1->plotOptions->pie->dataLabels->formatter = new HighchartJsExpr("function() {
    return '<b>'+ this.point.name +'</b>: '+ Math.round(this.percentage*100)/100 +' %'; }");

$chart1->series[] = array('type' => "pie",
                         'name' => "Lecture de Livre",
                         'data' =>  get_livres());

return $chart1->render();




}
</pre>

<h3 id="démonstration-et-téléchargement">Démonstration et téléchargement</h3>

<p>Vous pouvez télécharger les fichiers et avoir un aperçu de ce qu&rsquo;on peut faire dans <a href="http://labo.saugrin-sonia.fr/highcharts-php/">mon labo</a>. Il y à deux fichiers important, <code>chart.php</code> qui regroupe les fonctions pour créer le graphique, <code>functions.php</code> contient toutes les fonctions pour modifier l&rsquo;array obtenu à partir du CSV. Maintenant c&rsquo;est à vous d&rsquo;adapter cet exemple.</p>

    <h2>Je veux connaitre qui tu es</h2>
    <p>Je suis ravie que tu me lises. Que tu me crois ou non ! J'aimerais te connaitre un peu mieux. Te connaitre me permettra d'écrire des articles qui correspond mieux à tes attentes. Pour ce faire, je t'invite à inscrire ton mail dans la case qui suit.</p>
    <div id="mc_embed_signup">

    <form action="https://saugrin-sonia.us5.list-manage.com/subscribe/post?u=2e31b10cc6e0151227187ee70&amp;id=451adf38c8" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>

      <div id="mc_embed_signup_scroll">
        
        
        
        <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Ton adresse e-mail" required>
        
        <div id="mergeRow-gdpr" class="mergeRow gdpr-mergeRow content__gdprBlock mc-field-group">

          <div class="content__gdpr">

              

              <fieldset class="mc_fieldset gdprRequired mc-field-group" name="interestgroup_field">
                
                
                  
                  <label class="checkbox subfield" for="gdpr_8645">
                    
                    <input type="checkbox" id="gdpr_8645" name="gdpr[8645]" value="Y" class="av-checkbox ">
                    
                    <span>J'accepte de recevoir la newsletter</span>
                
                </label>
              
              </fieldset>

</div>
<div class="content__gdprLegal">
<p><small>Mailchimp est la plateforme marketing que j'utilise. En cliquant sur le boutton ci desssus, tu es conscient que tes informations seront envoyés à Mailchimp. <a href="https://mailchimp.com/legal/" target="_blank">Pour en savoir plus clique ici</a></small></p>

</div>
</div>

<div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_2e31b10cc6e0151227187ee70_451adf38c8" tabindex="-1" value=""></div>
<div class="clear"><input type="submit" value="Faisons connaissance" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
</div>
</form>
</div>
  </div>
  <footer>
    <ul class="stats">
  
    
    
      <li class="categories">
        <ul>
          
            
            <li><a class="article-category-link" href="https://saugrin-sonia.fr/categories/programmation">Programmation</a></li>
          
        </ul>
      </li>
    
  
  
    
    
      <li class="tags">
        <ul>
          
            
            <li><a class="article-category-link" href="https://saugrin-sonia.fr/tags/csv">csv</a></li>
          
            
            <li><a class="article-category-link" href="https://saugrin-sonia.fr/tags/highcharts">highcharts</a></li>
          
            
            <li><a class="article-category-link" href="https://saugrin-sonia.fr/tags/javascript">Javascript</a></li>
          
            
            <li><a class="article-category-link" href="https://saugrin-sonia.fr/tags/librairie">Librairie</a></li>
          
            
            <li><a class="article-category-link" href="https://saugrin-sonia.fr/tags/php">PHP</a></li>
          
        </ul>
      </li>
    
  
</ul>

  </footer>
</article>


<div class="pagination">
  
    <a href="/creer-un-flux-rss-avec-domdocument/" class="button big previous"><i class="fas fa-angle-left"></i> Creer un flux RSS avec DOMDocument</a>
  
  
    <a href="/heberger-une-page-web-sur-google-drive/" class="button big next">Héberger une page web sur Google Drive <i class="fas fa-angle-right"></i></a>
  
</div>


      </main>
      
      
      
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>


  
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>
  
  <script src=/js/util.js></script>
  <script src=/js/main.js></script>
  <script src=/js/vendor/foundation.min.js></script>
  <script src=/js/add-on.js></script>
  



    </div>
  </body>
</html>
